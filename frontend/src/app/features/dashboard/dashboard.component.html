<div class="dashboard-container">
  <nav class="navbar">
    <div class="nav-brand">
      <h1>
        <mat-icon>dashboard</mat-icon>
        Shipment Dashboard
      </h1>
    </div>
    <div class="nav-user">
      <span *ngIf="currentUser" class="user-name">Welcome, {{ currentUser.name }}</span>
      <button mat-raised-button (click)="logout()" [disabled]="isLoading">
        <mat-icon>logout</mat-icon>
        <span *ngIf="!isLoading">Logout</span>
        <span *ngIf="isLoading">Processing...</span>
      </button>
    </div>
  </nav>

  <div class="dashboard-content">
    <!-- User Info Card -->
    <mat-card *ngIf="currentUser" class="user-info-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>account_circle</mat-icon>
          User Profile
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="user-details">
          <div class="detail-row">
            <strong>Name:</strong>
            <span>{{ currentUser.name }}</span>
          </div>
          <div class="detail-row">
            <strong>Email:</strong>
            <span>{{ currentUser.email }}</span>
          </div>
          <div class="detail-row">
            <strong>Account Created:</strong>
            <span>{{ currentUser.created_at | date:'medium' }}</span>
          </div>
          <div class="detail-row" *ngIf="currentUser.email_verified_at">
            <strong>Email Verified:</strong>
            <span>{{ currentUser.email_verified_at | date:'medium' }}</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Data Tabs -->
    <mat-card class="data-tabs-card">
      <mat-card-content>
        <mat-tab-group animationDuration="0ms">
          <!-- Shipments Tab -->
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>local_shipping</mat-icon>
              Shipments
            </ng-template>
            <div class="tab-content">
              <app-shipment-list></app-shipment-list>
            </div>
          </mat-tab>
          
          <!-- Orders Tab -->
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>shopping_cart</mat-icon>
              Orders
            </ng-template>
            <div class="tab-content">
              <app-order-list></app-order-list>
            </div>
          </mat-tab>
        </mat-tab-group>
      </mat-card-content>
    </mat-card>

    <!-- Welcome Message (for development/debugging) -->
    <mat-card class="welcome-card">
      <mat-card-content>
        <div class="welcome-message">
          <h3>Welcome to the Shipment Management Dashboard!</h3>
          <p>You have successfully logged in to the application.</p>
          <p>Use the tabs above to view shipments and orders from Dolibarr ERP.</p>
          <div class="feature-list">
            <mat-icon>check_circle</mat-icon>
            <span>View and manage shipments with real-time status updates</span>
          </div>
          <div class="feature-list">
            <mat-icon>check_circle</mat-icon>
            <span>Track order progress and delivery schedules</span>
          </div>
          <div class="feature-list">
            <mat-icon>check_circle</mat-icon>
            <span>Access customer information and contact details</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>